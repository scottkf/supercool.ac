// Generated by CoffeeScript 1.3.3
(function() {
  var SettingLanguageOptionViewModel;

  SettingLanguageOptionViewModel = function(locale) {
    var _this = this;
    this.id = locale;
    this.label = kb.locale_manager.localeToLabel(locale);
    this.active = ko.computed(function() {
      kb.locale_change_observable();
      return locale === kb.locale_manager.getLocale();
    });
    this.setLanguage = function() {
      return kb.locale_manager.setLocale(this.id);
    };
    return this;
  };

  window.SettingsViewModel = function(locales) {
    var _this = this;
    this.language_options = _.map(locales, function(locale) {
      return new SettingLanguageOptionViewModel(locale);
    });
    this.current_language = ko.observable(kb.locale_manager.getLocale());
    this.selected_language = ko.computed({
      read: function() {
        return _this.current_language();
      },
      write: function(new_locale) {
        kb.locale_manager.setLocale(new_locale);
        return _this.current_language(new_locale);
      }
    });
    return this;
  };

}).call(this);
